<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FRIDAY Chat</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: url('https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0?auto=format&fit=crop&w=1470&q=80') no-repeat center center fixed;
      background-size: cover;
      backdrop-filter: blur(5px);
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .chat-container {
      width: 90%;
      max-width: 500px;
      height: 90vh;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      border-radius: 20px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    }
    .output {
      flex: 1;
      overflow-y: auto;
      padding: 10px;
      margin-bottom: 10px;
      color: #fff;
    }
    .message {
      display: flex;
      align-items: flex-start;
      margin-bottom: 10px;
    }
    .pfp {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      margin-right: 10px;
    }
    .bubble {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      padding: 10px 15px;
      border-radius: 15px;
      color: #fff;
      max-width: 80%;
    }
    .input-area {
      display: flex;
      gap: 10px;
    }
    #input {
      flex: 1;
      padding: 10px;
      border: none;
      border-radius: 12px;
      background: rgba(255,255,255,0.2);
      color: white;
      outline: none;
      backdrop-filter: blur(10px);
    }
    button {
      padding: 10px 15px;
      border: none;
      border-radius: 12px;
      background: rgba(255,255,255,0.3);
      color: white;
      cursor: pointer;
      backdrop-filter: blur(10px);
    }
    button:disabled {
      opacity: 0.6;
    }
    .dots::after {
      content: '...';
      animation: dots 1s steps(5, end) infinite;
    }
    @keyframes dots {
      0%, 20% { content: '.'; }
      40% { content: '..'; }
      60% { content: '...'; }
      80%, 100% { content: ''; }
    }
  </style>
</head>
<body>
  <div class="chat-container">
    <div class="output" id="output"></div>
    <div class="input-area">
      <input type="text" id="input" placeholder="Type something...">
      <button onclick="ask()">Send</button>
    </div>
  </div>
  <script>
    const output = document.getElementById('output');
    const input = document.getElementById('input');
    const sendBtn = document.querySelector('button');window.onload = () => {
  input.focus();
  input.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      ask();
    }
  });
};

let typingEl;
function showTyping() {
  typingEl = document.createElement('div');
  typingEl.className = 'message bot';
  typingEl.innerHTML = `
    <img src="1cb63636499fde62f725d97d39e2518a.png" alt="FRIDAY" class="pfp">
    <div class="bubble">FRIDAY is typing<span class="dots"></span></div>
  `;
  output.appendChild(typingEl);
  output.scrollTop = output.scrollHeight;
}

function removeTyping() {
  if (typingEl) typingEl.remove();
  typingEl = null;
}

async function ask() {
  const text = input.value.trim();
  if (!text) return;

  const userMsg = document.createElement('div');
  userMsg.className = 'message user';
  userMsg.innerHTML = `<img src="pfp.png" class="pfp"><div class="bubble">${text}</div>`;
  output.appendChild(userMsg);
  input.value = '';
  input.focus();

  sendBtn.disabled = true;
  sendBtn.textContent = '...';
  showTyping();

  try {
    const res = await fetch('/api/chat', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ prompt: text })
    });
    const data = await res.json();

    const botMsg = document.createElement('div');
    botMsg.className = 'message bot';
    botMsg.innerHTML = `
      <img src="1cb63636499fde62f725d97d39e2518a.png" alt="FRIDAY" class="pfp">
      <div class="bubble">${data.response}</div>
    `;
    removeTyping();
    output.appendChild(botMsg);
    output.scrollTop = output.scrollHeight;
  } catch (e) {
    removeTyping();
    alert("Error talking to AI");
  } finally {
    sendBtn.disabled = false;
    sendBtn.textContent = 'Send';
  }
}

  </script>
</body>
</html>